====
    This file is part of FoxelLog.

    FoxelLog is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    FoxelLog is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with FoxelLog.  If not, see <http://www.gnu.org/licenses/>.
====

Rollback
====================================================================================
Get all matching documents, sorted by date desc, set rolledback = true, put into rollback map {key = location}
Make empty rollback set
Make empty change map {key = location, value = toBlock}
For every location
    a) Check for any newer changes on the location. If found, remove all blocks with location from rollback set
    b) Chain down from current.blockFrom -> next.blockTo of current set of blocks
    c) If the chain terminates, get blocks with rolledback = true at same location to continue chain, if any found, append to current set of blocks, return to (b), otherwise do (d)
    d) End loop, add chain to rollback set and end to change map
For the entire rollback set, delete from database
For entire change map, perform changes
